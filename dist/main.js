(()=>{"use strict";const t=(()=>{const t=function(t){for(let e=0;e<t.length;e++)t[e].style.color="black",t[e].style.borderColor="black"};return{visibleDiv:function(t){"visible"===t.style.visibility?t.style.visibility="hidden":t.style.visibility="visible"},selectedDiv:function(e,s){"red"===s.style.color?t(e):(t(e),s.style.color="red",s.style.borderColor="red")},taskStatusDisplay:function(t){const e=document.querySelectorAll(".task-status")[t];e.classList.contains("task-status-not-done")?(e.classList.remove("task-status-not-done"),e.classList.add("task-status-done")):e.classList.contains("task-status-done")?(e.classList.remove("task-status-done"),e.classList.add("task-status-failed")):e.classList.contains("task-status-failed")&&(e.classList.remove("task-status-failed"),e.classList.add("task-status-not-done"))}}})(),e=(()=>{const e=document.querySelector("#new-task-button"),i=document.querySelector("#new-task-form");e.addEventListener("click",(()=>{t.visibleDiv(i)})),document.querySelector("#submit-task-button").addEventListener("click",(()=>{const e=document.querySelector("#tname").value;""==e&&(e="Task");const r=document.querySelector("input[type=radio][name=priority]:checked").value;s.projectsList[s.currentProjectIndex].tasks.push(((t,e,s)=>({name:t,status:"not-done",priority:s}))(e,0,r)),t.visibleDiv(i),n(s.projectsList[s.currentProjectIndex].tasks.length-1),o.saveLocalStorage()}));const n=function(e=0){const i=document.querySelector("#tasks");let n=s.projectsList[s.currentProjectIndex].tasks;for(let c=e;c<n.length;c++){const e=document.createElement("div");e.classList.add("list-task");const a=document.createElement("i");a.classList.add("material-icons"),a.classList.add("task-status"),a.classList.add(`task-status-${n[c].status}`),a.textContent="ral";const l=document.createElement("p");l.textContent=n[c].name;const d=document.createElement("div");d.classList.add("task-buttons");const u=document.createElement("button");u.type="button",u.classList.add("priority-buttons"),u.classList.add(n[c].priority);const p=document.createElement("i");p.classList.add("material-icons"),p.textContent="High Priority",u.appendChild(p),u.addEventListener("click",(()=>{"low-priority"==n[c].priority?(s.projectsList[s.currentProjectIndex].tasks[c].priority="medium-priority",u.classList.remove("low-priority"),u.classList.add("medium-priority"),p.textContent="Med. Priority"):"medium-priority"==n[c].priority?(s.projectsList[s.currentProjectIndex].tasks[c].priority="high-priority",u.classList.remove("medium-priority"),u.classList.add("high-priority"),p.textContent="High Priority"):"high-priority"==n[c].priority&&(s.projectsList[s.currentProjectIndex].tasks[c].priority="low-priority",u.classList.remove("high-priority"),u.classList.add("low-priority"),p.textContent="Low Priority"),o.saveLocalStorage()}));const m=document.createElement("button");m.type="button",m.classList.add("task-status-button"),m.textContent="Change Status",m.addEventListener("click",(()=>{"not-done"==n[c].status?s.projectsList[s.currentProjectIndex].tasks[c].status="done":"done"==n[c].status?s.projectsList[s.currentProjectIndex].tasks[c].status="failed":"failed"==n[c].status&&(s.projectsList[s.currentProjectIndex].tasks[c].status="not-done"),t.taskStatusDisplay(c),o.saveLocalStorage()}));const y=document.createElement("button");y.type="button",y.classList.add("delete-button-task");const L=document.createElement("i");L.classList.add("material-icons"),L.textContent="remove",y.appendChild(L),y.addEventListener("click",(()=>{r(y,c)})),d.appendChild(u),d.appendChild(m),d.appendChild(y),e.appendChild(a),e.appendChild(l),e.appendChild(d),i.appendChild(e)}},r=function(t,e){s.projectsList[s.currentProjectIndex].tasks.splice(e,1),t.parentElement.parentElement.remove()};return{taskTitleDivDisplay:function(){const t=document.querySelector("#project-data-name"),e=document.querySelector("#project-data-date");t.textContent=s.projectsList[s.currentProjectIndex].name,e.textContent=s.projectsList[s.currentProjectIndex].dueDate},tasksDisplay:n,clearTaskDisplay:function(){const t=document.querySelector("#tasks");for(;t.firstChild;)t.removeChild(t.firstChild),o.saveLocalStorage()}}})(),s=(()=>{const i=document.querySelector("#new-project-button"),n=document.querySelector("#new-project-form");i.addEventListener("click",(()=>{t.visibleDiv(n)})),document.querySelector("#submit-project-button").addEventListener("click",(()=>{let e=document.querySelector("#pname").value;""==e&&(e="Project");let i=document.querySelector("#duedate").value;if(""==i){let t=new Date,e=t.getFullYear(),s=(t.getMonth()+1).toString();for(;s.length<2;)s="0"+s;let o=t.getDate().toString();for(;o.length<2;)o="0"+o;i=`${e}-${s}-${o}`}i=i.split("-").reverse().join("/"),s.projectsList.push(((t,e,s)=>({name:t,dueDate:e,tasks:[]}))(e,i)),r(s.projectsList.length-1),t.visibleDiv(n),o.saveLocalStorage()}));const r=function(o=0){const i=document.querySelector("#projects");for(let n=o;n<s.projectsList.length;n++){console.log(s.projectsList[n]);const o=document.createElement("div");o.classList.add("projects-div");const r=document.createElement("button");r.type="button",r.classList.add("project-name"),r.textContent=s.projectsList[n].name,r.addEventListener("click",(()=>{t.selectedDiv(document.querySelectorAll(".project-name"),r),c(n);const s=document.querySelector("#list");"visible"!=s.style.visibility&&(s.style.visibility="visible"),e.taskTitleDivDisplay(),e.clearTaskDisplay(),e.tasksDisplay()}));const l=document.createElement("button");l.classList.add("delete-button-project"),l.type="button";const d=document.createElement("i");d.classList.add("material-icons"),d.textContent="remove",l.appendChild(d),l.addEventListener("click",(()=>{a(l,n)})),o.appendChild(r),o.appendChild(l),i.appendChild(o)}},c=function(t){s.currentProjectIndex=t},a=function(t,e){s.projectsList.splice(e,1),t.parentElement.remove(),0==s.projectsList.length&&(document.querySelector("#list").style.visibility="hidden"),o.saveLocalStorage()};return{projectsList:[],currentProjectIndex:void 0,projectsDisplay:r}})(),o={saveLocalStorage:function(){localStorage.setItem("projectsModule.projectsList",JSON.stringify(s.projectsList))},loadLocalStorage:function(){s.projectsList=JSON.parse(localStorage.getItem("projectsModule.projectsList")),null===s.projectsList&&(s.projectsList=[]),s.projectsDisplay(0)}};o.loadLocalStorage()})();